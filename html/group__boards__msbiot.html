<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>MSB-IoT</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="jquery.scrollTo.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right"
                    onsubmit="try{
                        displaySR();
                    }finally{
                            return false;
                    }">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__boards__msbiot.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a>  </div>
  <div class="headertitle">
<div class="title">MSB-IoT<div class="ingroups"><a class="el" href="group__boards.html">Boards</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Support for the MSB-IoT board.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Support for the MSB-IoT board. </p>
<h1><a class="anchor" id="autotoc_md599"></a>
Overview</h1>
<p>The MSB-IoT was developed at FU Berlin and is based on a STM32F415RG MCU.</p>
<p><img src="https://raw.githubusercontent.com/wiki/RIOT-OS/RIOT/images/msbiot-components.png" alt="MSB-IoT" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md600"></a>
Hardware</h1>
<h3><a class="anchor" id="autotoc_md601"></a>
MCU</h3>
<p>The centerpiece of the MSB-IoT is the STM32F415RG MCU. With a maximum frequency of 168 MHz it offers high performance for a microcontroller of its category. The STM32F415RG comes with a huge set of accessible communication interfaces and features that are listed <a href="http://www.st.com/web/catalog/mmc/FM141/SC1169/SS1577/LN1035/PF252143?sc=internet/mcu/product/252143.jsp">here</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">MCU </th><th class="markdownTableHeadLeft">STM32F415RG  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Family </td><td class="markdownTableBodyLeft">ARM Cortex-M4  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor </td><td class="markdownTableBodyLeft">ST Microelectronics  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">RAM </td><td class="markdownTableBodyLeft">192KiB (128KiB RAM + 64KiB CCMRAM)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Flash </td><td class="markdownTableBodyLeft">1024KiB  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Frequency </td><td class="markdownTableBodyLeft">up to 168MHz  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">FPU </td><td class="markdownTableBodyLeft">yes  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Timers </td><td class="markdownTableBodyLeft">14 (12x 16bit, 2x 32bit [TIM2 + TIM5])  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">ADCs </td><td class="markdownTableBodyLeft">3x 12-bit (16 channel)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">UARTs </td><td class="markdownTableBodyLeft">6 (4 USART, 2 UART)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SPIs </td><td class="markdownTableBodyLeft">3  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">I2Cs </td><td class="markdownTableBodyLeft">3  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vcc </td><td class="markdownTableBodyLeft">1.8V - 3.6V  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet </td><td class="markdownTableBodyLeft"><a href="http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00035129.pdf">Datasheet</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Reference Manual </td><td class="markdownTableBodyLeft"><a href="http://www.st.com/st-web-ui/static/active/en/resource/technical/document/reference_manual/DM00031020.pdf">Reference Manual</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Programming Manual </td><td class="markdownTableBodyLeft"><a href="http://www.st.com/st-web-ui/static/active/en/resource/technical/document/programming_manual/DM00046982.pdf">Programming Manual</a>  </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md602"></a>
GPIO Pins</h3>
<p>The following picture shows the easily accessible pins of the board:</p>
<p><img src="https://raw.githubusercontent.com/wiki/RIOT-OS/RIOT/images/msbiot-pinout.png" alt="MSB-IoT Pinout" class="inline"/></p>
<h3><a class="anchor" id="autotoc_md603"></a>
User Interface</h3>
<h4><a class="anchor" id="autotoc_md604"></a>
3 Buttons</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">NAME </th><th class="markdownTableHeadLeft">User Button T1 </th><th class="markdownTableHeadLeft">User Button T2 </th><th class="markdownTableHeadLeft">T RESET  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Pin </td><td class="markdownTableBodyLeft">PB13 </td><td class="markdownTableBodyLeft">PA0 </td><td class="markdownTableBodyLeft">NRST  </td></tr>
</table>
<p>The user buttons are mapped to GPIO_0 (Button T2) and GPIO_8 (Button T1) in the board's default configuration file for RIOT. To configure and use the buttons, you can use RIOT's <a class="el" href="group__drivers__periph__gpio.html">GPIO</a>.</p>
<p>Pushing the reset button will always reset the board and restart your application.</p>
<h4><a class="anchor" id="autotoc_md605"></a>
3 user controllable LEDs</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">NAME </th><th class="markdownTableHeadNone">LED_RED </th><th class="markdownTableHeadNone">LED_YELLOW </th><th class="markdownTableHeadNone">LED_GREEN  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Color </td><td class="markdownTableBodyNone">red </td><td class="markdownTableBodyNone">yellow </td><td class="markdownTableBodyNone">green  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Pin </td><td class="markdownTableBodyNone">PB8 </td><td class="markdownTableBodyNone">PB14 </td><td class="markdownTableBodyNone">PB15  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Pin Alias </td><td class="markdownTableBodyNone"><a class="el" href="nrf52840dongle_2include_2board_8h.html#a3fc522fda449d6edde717d6a857429cf">LED0_PIN</a> </td><td class="markdownTableBodyNone"><a class="el" href="nrf52840dongle_2include_2board_8h.html#a318aa17e5d40e2132d2c7f6269ce7f51">LED1_PIN</a> </td><td class="markdownTableBodyNone"><a class="el" href="nrf52840dongle_2include_2board_8h.html#af6f84078113b55354d20585131b386f7">LED2_PIN</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Macros </td><td class="markdownTableBodyNone"><a class="el" href="group__drivers__led.html#ga1e48dc02333bfc2e6ad3e5bd466eecd4">LED0_ON</a>, ... </td><td class="markdownTableBodyNone"><a class="el" href="group__drivers__led.html#gaadd4c7ae0cd4e9bbb17f7055dd51fe08">LED1_ON</a>, ... </td><td class="markdownTableBodyNone"><a class="el" href="group__drivers__led.html#gab55f588eb2c5177d3f7806e60d379fba">LED2_ON</a>, ...  </td></tr>
</table>
<p>The LEDs can be controlled inside your RIOT application by using the LED macros <a class="el" href="group__drivers__led.html#ga1e48dc02333bfc2e6ad3e5bd466eecd4">LED0_ON</a>, <a class="el" href="group__drivers__led.html#gaef2e39b9fd343d0e437fac0463f3e02d">LED0_OFF</a>, and <a class="el" href="group__drivers__led.html#gaebc6389533d9fc8dcbe4d2129a4d5a45">LED0_TOGGLE</a> for the red LED, <a class="el" href="group__drivers__led.html#gaadd4c7ae0cd4e9bbb17f7055dd51fe08">LED1_ON</a>, <a class="el" href="group__drivers__led.html#ga343fd2d3ce61b84f88ddfaea32c67c58">LED1_OFF</a>, and <a class="el" href="group__drivers__led.html#ga267fdbba1d750146b73da35c1731fd17">LED1_TOGGLE</a> for the yellow LED, and <a class="el" href="group__drivers__led.html#gab55f588eb2c5177d3f7806e60d379fba">LED2_ON</a>, <a class="el" href="group__drivers__led.html#gac6468b1df4dfabcca0bb142044d6f976">LED2_OFF</a>, and <a class="el" href="group__drivers__led.html#gacd16785845ce7004334b91a98707f8eb">LED2_TOGGLE</a> for the green LED.</p>
<p>There is also a yellow charge LED on the board indicating the charging process of the battery.</p>
<h4><a class="anchor" id="autotoc_md606"></a>
1 Beeper</h4>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">NAME </th><th class="markdownTableHeadLeft">Beeper  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Pin </td><td class="markdownTableBodyLeft">PB09  </td></tr>
</table>
<p>The board's beeper allows for acoustic feedback. It needs a PWM signal between 1-5 kHz and is connected to pin PB9 and mapped to PWM_0 in RIOT. To configure and use the beeper inside your application, you can use RIOT's <a class="el" href="group__drivers__periph__pwm.html">PWM</a>.</p>
<h3><a class="anchor" id="autotoc_md607"></a>
CC1101 Sub-1GHz RF Transceiver</h3>
<p>The board has an integrated CC1101 Sub-1GHz RF Transceiver which is connected to the MCU using the SPI. The transceiver allows for energy-efficient local communication in the frequency band below 1 GHz. The driver for the CC1101 automatically loaded when the pseudo module <code>netdev_default</code> is used.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Product </th><th class="markdownTableHeadLeft">CC1101  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type </td><td class="markdownTableBodyLeft">Sub-1GHz RF Transceiver  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor </td><td class="markdownTableBodyLeft">Texas Instruments  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet </td><td class="markdownTableBodyLeft"><a href="http://www.ti.com/lit/ds/symlink/cc1101.pdf">Datasheet</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Errata Sheet </td><td class="markdownTableBodyLeft"><a href="https://www.ti.com/lit/er/swrz020e/swrz020e.pdf">Errata Sheet</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Other Technical Documents </td><td class="markdownTableBodyLeft"><a href="http://www.ti.com/product/CC1101/technicaldocuments">TI Webpage</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Driver </td><td class="markdownTableBodyLeft"><a class="el" href="group__drivers__cc110x.html">CC1100/CC1100e/CC1101 Sub-GHz transceiver driver</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SPI Device </td><td class="markdownTableBodyLeft">SPI1 (Mapped to SPI_0 in RIOT)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SCL </td><td class="markdownTableBodyLeft">PA5  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MISO </td><td class="markdownTableBodyLeft">PA6  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MOSI </td><td class="markdownTableBodyLeft">PA7  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">CS </td><td class="markdownTableBodyLeft">PB12  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">GDO0 </td><td class="markdownTableBodyLeft">PC4  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GDO2 </td><td class="markdownTableBodyLeft">PC5  </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md608"></a>
CC3000 802.11b/g Wi-Fi Module</h3>
<p>In addition to the CC1101, the MSB-IoT also features a CC3000 Wi-Fi Module. The CC3000 is a self-contained wireless network module with a full embedded IPv4 TCP/IP stack that for example allows to use the MSB-IoT as a gateway node to the internet. Please note that the CC3000 only supports operation in infrastructure mode and therefore always needs to be connected to an access point to be used for communication.</p>
<p>The CC3000's driver implementation for RIOT includes the full driver provided by Texas Instruments. The API documentation from TI can be found <a href="http://software-dl.ti.com/ecs/simplelink/cc3000/public/doxygen_API/v1.14/html/index.html">here</a>. To use the CC3000 in RIOT, just add <code>USEMODULE += cc3000</code> to your application's Makefile.</p>
<p>The driver for the CC3000 is not yet merged into RIOT's master branch. Please see pull request <a href="https://github.com/RIOT-OS/RIOT/pull/2603">#2603</a> for progress on the inclusion.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Product </th><th class="markdownTableHeadLeft">CC3000  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type </td><td class="markdownTableBodyLeft">802.11b/g Wi-Fi Module  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor </td><td class="markdownTableBodyLeft">Texas Instruments  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Datasheet </td><td class="markdownTableBodyLeft"><a href="https://web.archive.org/web/20171109015601/http://www.ti.com/lit/ds/symlink/cc3000.pdf">Datasheet</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Errata Sheet </td><td class="markdownTableBodyLeft"><a href="http://www.ti.com/lit/er/swrz044b/swrz044b.pdf">Errata Sheet</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Other Technical Documents </td><td class="markdownTableBodyLeft"><a href="https://web.archive.org/web/20190825013529/http://www.ti.com/product/CC3000/technicaldocuments">TI Webpage</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">TI Support Forum </td><td class="markdownTableBodyLeft"><a href="https://e2e.ti.com/support/wireless-connectivity/wifi/f/968">WiFi Forum</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Driver </td><td class="markdownTableBodyLeft"><a href="https://github.com/RIOT-OS/RIOT/pull/2603">Pull Request</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SPI Device </td><td class="markdownTableBodyLeft">SPI2 (Mapped to SPI_1 in RIOT)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SCL </td><td class="markdownTableBodyLeft">PB10  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MISO </td><td class="markdownTableBodyLeft">PC2  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MOSI </td><td class="markdownTableBodyLeft">PC3  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">CS </td><td class="markdownTableBodyLeft">PC1  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">WLAN_ENABLE </td><td class="markdownTableBodyLeft">PC13  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">IRQ Line </td><td class="markdownTableBodyLeft">PA10  </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md609"></a>
MPU-9150 Nine-Axis MotionTracking Device</h3>
<p>The MSB-IoT is equipped with a MPU-9150 MotionTracking Device from Invensense. The device combines a gyroscope, a magnetometer and an accelerometer in one module.</p>
<p>Due to licensing issues, the current MPU-9150 driver implementation for RIOT is not based on Invensense's 'Motion Driver' library and offers only a limited set of features. Nonetheless, the RIOT driver allows to configure and read values from all three sensors of the device. For an overview on the supported features, you can check the driver's documentation in <a class="el" href="group__drivers__mpu9x50.html">MPU-9X50 (MPU9150 and MPU9250) accelerometer/magnetometer/gyroscope</a>.</p>
<p>A sample RIOT application for the MPU-9150 that utilizes the driver can be found <a href="https://github.com/RIOT-OS/RIOT/tree/master/tests/driver_mpu9x50">here</a>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Product </th><th class="markdownTableHeadLeft">MPU-9150  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Type </td><td class="markdownTableBodyLeft">Nine-Axis MotionTracking Device (Gyro, Accel and Compass)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Vendor </td><td class="markdownTableBodyLeft">Invensense  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Product Specification </td><td class="markdownTableBodyLeft"><a href="https://invensense.tdk.com/wp-content/uploads/2015/02/MPU-9150-Datasheet.pdf">Product Specification</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Register Map </td><td class="markdownTableBodyLeft"><a href="https://invensense.tdk.com/wp-content/uploads/2015/02/MPU-9150-Register-Map.pdf">Register Map</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Driver </td><td class="markdownTableBodyLeft"><a class="el" href="group__drivers__mpu9x50.html">MPU-9X50 (MPU9150 and MPU9250) accelerometer/magnetometer/gyroscope</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">I²C Device </td><td class="markdownTableBodyLeft">I2C1 (Mapped to I2C_0 in RIOT)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">SCL </td><td class="markdownTableBodyLeft">PB6  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">SDA </td><td class="markdownTableBodyLeft">PB7  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">IRQ Line </td><td class="markdownTableBodyLeft">PB11  </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md610"></a>
Other components</h3>
<p>For the following components of the MSB-IoT, there is currently no support in RIOT: <a href="http://www.ti.com/product/tca6416">TCA6416 16-Bit I/O Expander</a> Micro-SD-Card Interface</p>
<h1><a class="anchor" id="autotoc_md611"></a>
Compiling, Flashing and Debugging</h1>
<p>This section only covers the automated functionality provided by RIOT's makefile system. If you don't want to rely on RIOT's make targets for flashing or debugging (for instance to use a different flashing tool), please check the documentation of your used tools.</p>
<h3><a class="anchor" id="autotoc_md612"></a>
Prerequisites</h3>
<p>We strongly recommend the usage of the <a href="https://launchpad.net/gcc-arm-embedded">GNU Tools for ARM Embedded Processors</a> toolchain for the MSB-IoT. Support for other toolchains was not tested!</p>
<p>RIOT's provided functionality for debugging and flashing the MSB-IoT is based on the <a href="http://openocd.org/">Open On-Chip Debugger</a> tool. A wiki page with installation instructions and some other information can be found <a href="https://github.com/RIOT-OS/RIOT/wiki/OpenOCD">here</a>.</p>
<h3><a class="anchor" id="autotoc_md613"></a>
Quick start</h3>
<p>For a quick getting started guide you can stick to the steps explained on <a href="https://github.com/RIOT-OS/RIOT/wiki/Getting-started-with-STM32F%5B0%7C3%7C4%5Ddiscovery-boards">this page</a>. Just make sure to use "msbiot" as the respective board name.</p>
<h3><a class="anchor" id="autotoc_md614"></a>
Compiling</h3>
<div class="fragment"><div class="line">fabian@fabian-ThinkPad-L412:~/myriot/RIOT/examples/hello-world$ BOARD=msbiot</div>
<div class="line">make</div>
<div class="line">Building application <span class="stringliteral">&quot;hello-world&quot;</span> <span class="keywordflow">for</span> <span class="stringliteral">&quot;msbiot&quot;</span> with MCU <span class="stringliteral">&quot;stm32f4&quot;</span>.</div>
<div class="line"> </div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/boards/msbiot</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/core</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/stm32f4</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/cortex-m4_common</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/stm32f4/periph</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/drivers</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/sys</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/sys/<a class="code" href="auto__init_8h.html#a923fd92ea17c7891c288f1ddc135f112">auto_init</a></div>
<div class="line">   text     data     bss     dec     hex filename</div>
<div class="line">  11116      116    6444   17676    450c</div>
<div class="line">/home/fabian/myriot/RIOT/examples/hello-world/bin/msbiot/hello-world.elf</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md615"></a>
Flashing</h3>
<div class="fragment"><div class="line">fabian@fabian-ThinkPad-L412:~/myriot/RIOT/examples/hello-world$ BOARD=msbiot</div>
<div class="line">make flash</div>
<div class="line">Building application <span class="stringliteral">&quot;hello-world&quot;</span> <span class="keywordflow">for</span> <span class="stringliteral">&quot;msbiot&quot;</span> with MCU <span class="stringliteral">&quot;stm32f4&quot;</span>.</div>
<div class="line"> </div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/boards/msbiot</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/core</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/stm32f4</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/cortex-m4_common</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/cpu/stm32f4/periph</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/drivers</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/sys</div>
<div class="line"><span class="stringliteral">&quot;make&quot;</span> -C /home/fabian/myriot/RIOT/sys/<a class="code" href="auto__init_8h.html#a923fd92ea17c7891c288f1ddc135f112">auto_init</a></div>
<div class="line">   text     data     bss     dec     hex filename</div>
<div class="line">  11116      116    6444   17676    450c</div>
<div class="line">/home/fabian/myriot/RIOT/examples/hello-world/bin/msbiot/hello-world.elf</div>
<div class="line">/home/fabian/myriot/RIOT/dist/tools/openocd/openocd.sh flash</div>
<div class="line"><span class="preprocessor">### Flashing Target ###</span></div>
<div class="line">Open On-Chip Debugger 0.8.0 (2015-03-01-08:19)</div>
<div class="line">Licensed under GNU GPL v2</div>
<div class="line">For bug reports, read</div>
<div class="line"> http:<span class="comment">//openocd.sourceforge.net/doc/doxygen/bugs.html</span></div>
<div class="line">srst_only separate srst_nogate srst_open_drain connect_deassert_srst</div>
<div class="line">Info : This adapter doesn<span class="stringliteral">&#39;t support configurable speed</span></div>
<div class="line"><span class="stringliteral">Info : STLINK v2 JTAG v17 API v2 SWIM v4 VID 0x0483 PID 0x3748</span></div>
<div class="line"><span class="stringliteral">Info : using stlink api v2</span></div>
<div class="line"><span class="stringliteral">Info : Target voltage: 3.183191</span></div>
<div class="line"><span class="stringliteral">Info : stm32f4x.cpu: hardware has 0 breakpoints, 0 watchpoints</span></div>
<div class="line"><span class="stringliteral">Error: jtag status contains invalid mode value - communication failure</span></div>
<div class="line"><span class="stringliteral">Polling target stm32f4x.cpu failed, GDB will be halted. Polling again in</span></div>
<div class="line"><span class="stringliteral">100ms</span></div>
<div class="line"><span class="stringliteral">Error: jtag status contains invalid mode value - communication failure</span></div>
<div class="line"><span class="stringliteral">Polling target stm32f4x.cpu failed, GDB will be halted. Polling again in</span></div>
<div class="line"><span class="stringliteral">300ms</span></div>
<div class="line"><span class="stringliteral">    TargetName         Type       Endian TapName            State</span></div>
<div class="line"><span class="stringliteral">--  ------------------ ---------- ------ ------------------ ------------</span></div>
<div class="line"><span class="stringliteral"> 0* stm32f4x.cpu       hla_target little stm32f4x.cpu       unknown</span></div>
<div class="line"><span class="stringliteral">target state: halted</span></div>
<div class="line"><span class="stringliteral">target halted due to debug-request, current mode: Thread</span></div>
<div class="line"><span class="stringliteral">xPSR: 0x01000000 pc: 0x080002fc msp: 0x2000ab48</span></div>
<div class="line"><span class="stringliteral">Polling target stm32f4x.cpu succeeded again</span></div>
<div class="line"><span class="stringliteral">target state: halted</span></div>
<div class="line"><span class="stringliteral">target halted due to debug-request, current mode: Thread</span></div>
<div class="line"><span class="stringliteral">xPSR: 0x01000000 pc: 0x080002fc msp: 0x2000ab48</span></div>
<div class="line"><span class="stringliteral">   Programming Started **</span></div>
<div class="line"><span class="stringliteral">auto erase enabled</span></div>
<div class="line"><span class="stringliteral">Info : stm32f4x errata detected - fixing incorrect MCU_IDCODE</span></div>
<div class="line"><span class="stringliteral">Info : device id = 0x10006413</span></div>
<div class="line"><span class="stringliteral">Info : flash size = 1024kbytes</span></div>
<div class="line"><span class="stringliteral">target state: halted</span></div>
<div class="line"><span class="stringliteral">target halted due to breakpoint, current mode: Thread</span></div>
<div class="line"><span class="stringliteral">xPSR: 0x61000000 pc: 0x20000042 msp: 0x2000ab48</span></div>
<div class="line"><span class="stringliteral">wrote 16384 bytes from file /home/fabian/myriot/RIOT/examples/hello-</span></div>
<div class="line"><span class="stringliteral">world/bin/msbiot/hello-world.hex in 0.869447s (18.403 KiB/s)</span></div>
<div class="line"><span class="stringliteral">   Programming Finished **</span></div>
<div class="line"><span class="stringliteral">   Verify Started **</span></div>
<div class="line"><span class="stringliteral">target state: halted</span></div>
<div class="line"><span class="stringliteral">target halted due to breakpoint, current mode: Thread</span></div>
<div class="line"><span class="stringliteral">xPSR: 0x61000000 pc: 0x2000002e msp: 0x2000ab48</span></div>
<div class="line"><span class="stringliteral">verified 11232 bytes in 0.124356s (88.204 KiB/s)</span></div>
<div class="line"><span class="stringliteral">   Verified OK **</span></div>
<div class="line"><span class="stringliteral">shutdown command invoked</span></div>
<div class="line"><span class="stringliteral">shutdown command invoked</span></div>
<div class="line"><span class="stringliteral">Done flashing</span></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md616"></a>
Debugging</h3>
<div class="fragment"><div class="line">fabian@fabian-ThinkPad-L412:~/myriot/RIOT/examples/hello-world$ BOARD=msbiot</div>
<div class="line">make debug</div>
<div class="line">/home/fabian/myriot/RIOT/dist/tools/openocd/openocd.sh debug</div>
<div class="line"><span class="preprocessor">### Starting Debugging ###</span></div>
<div class="line">Open On-Chip Debugger 0.8.0 (2015-03-01-08:19)</div>
<div class="line">Licensed under GNU GPL v2</div>
<div class="line">For bug reports, read</div>
<div class="line"> http:<span class="comment">//openocd.sourceforge.net/doc/doxygen/bugs.html</span></div>
<div class="line">GNU gdb (GNU Tools <span class="keywordflow">for</span> ARM Embedded Processors) 7.6.0.20131129-cvs</div>
<div class="line">Copyright (C) 2013 Free Software Foundation, Inc.</div>
<div class="line">License GPLv3+: GNU GPL version 3 or later &lt;http:<span class="comment">//gnu.org/licenses/gpl.html&gt;</span></div>
<div class="line">This is <a class="code" href="group__oneway__malloc.html#gafbedc913aa4651b3c3b4b3aecd9b4711">free</a> software: you are <a class="code" href="group__oneway__malloc.html#gafbedc913aa4651b3c3b4b3aecd9b4711">free</a> to change and redistribute it.</div>
<div class="line">There is NO WARRANTY, to the extent permitted by law.  Type <span class="stringliteral">&quot;show copying&quot;</span></div>
<div class="line">and <span class="stringliteral">&quot;show warranty&quot;</span> <span class="keywordflow">for</span> details.</div>
<div class="line">This GDB was configured as <span class="stringliteral">&quot;--host=i686-linux-gnu --target=arm-none-eabi&quot;</span>.</div>
<div class="line">For bug reporting instructions, please see:</div>
<div class="line">&lt;http:<span class="comment">//www.gnu.org/software/gdb/bugs/&gt;...</span></div>
<div class="line">Reading symbols from /home/fabian/myriot/RIOT/examples/hello-</div>
<div class="line">world/bin/msbiot/hello-world.elf...done.</div>
<div class="line">Remote debugging using :3333</div>
<div class="line">reset_handler () at /home/fabian/myriot/RIOT/cpu/stm32f4/startup.c:54</div>
<div class="line">54   {</div>
<div class="line">(gdb)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md617"></a>
Using the UART for STDIO</h3>
<p>The MCU's USART2 is set as the default input/output for the MSB-IoT inside RIOT (mapped to UART_0). It is initialized and configured automatically for every RIOT application and can be used for communication with your computer. The easiest way is to use an USB to TTL adapter:</p>
<p>Step 1: Connect your adapter and the boards pin strip with RX&lt;=&gt;PA02, TX&lt;=&gt;PA03 and GND&lt;=&gt;GND</p>
<p>Step 2: Done. The MCUs USART2 is used as STDIO. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:msbiot_2include_2board_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msbiot_2include_2board_8h.html">board.h</a></td></tr>
<tr class="memdesc:msbiot_2include_2board_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific definitions for the MSB-IoT board. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:msbiot_2include_2gpio__params_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msbiot_2include_2gpio__params_8h.html">gpio_params.h</a></td></tr>
<tr class="memdesc:msbiot_2include_2gpio__params_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Board specific configuration of direct mapped GPIOs. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:boards_2msbiot_2include_2periph__conf_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="boards_2msbiot_2include_2periph__conf_8h.html">periph_conf.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aauto__init_8h_html_a923fd92ea17c7891c288f1ddc135f112"><div class="ttname"><a href="auto__init_8h.html#a923fd92ea17c7891c288f1ddc135f112">auto_init</a></div><div class="ttdeci">void auto_init(void)</div><div class="ttdoc">Initializes all high level modules that do not require parameters for initialization or uses default ...</div></div>
<div class="ttc" id="agroup__oneway__malloc_html_gafbedc913aa4651b3c3b4b3aecd9b4711"><div class="ttname"><a href="group__oneway__malloc.html#gafbedc913aa4651b3c3b4b3aecd9b4711">free</a></div><div class="ttdeci">void free(void *ptr)</div><div class="ttdoc">This is a no-op.</div></div>
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Tue Nov 24 2020 19:46:59 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.17</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
