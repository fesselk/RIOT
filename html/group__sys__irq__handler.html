<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Interrupt handler thread</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <!--BEGIN SEARCHENGINE hidden-sm hidden-xs"-->
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right"
                    onsubmit="try{
    var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replaceAll('href=\"../','href=\"');
    document.getElementById('MSearchResultsWindow').style.display='none';
    document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
    document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
    document.getElementById('doc-content').innerHTML=rhtml;
}finally{
                            return false;
                    }">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event);
                              var r=document.getElementById('MSearchResultsWindow');
                              if(parseInt(r.style.left)<0)r.style.left=0;
                              var x=document.getElementById('MSearchResults');
                              if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                              var f=document.getElementById('riot-searchform');
                              if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sys__irq__handler.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Interrupt handler thread<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Single thread for handling interrupts that may trigger blocking functions and therefore may only be called in thread context.  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Single thread for handling interrupts that may trigger blocking functions and therefore may only be called in thread context. </p>
<dl class="section author"><dt>Author</dt><dd>Gunar Schorcht <a href="#" onclick="location.href='mai'+'lto:'+'gun'+'ar'+'@sc'+'ho'+'rch'+'t.'+'net'; return false;">gunar<span style="display: none;">.nosp@m.</span>@sch<span style="display: none;">.nosp@m.</span>orcht<span style="display: none;">.nosp@m.</span>.net</a></dd></dl>
<h2>Interrupt Context Problem</h2>
<p>There are many devices connected to the host CPU via a bus system such as I2C or SPI. Such devices are, for example, sensors and actuators. Since these devices share the bus system, their access to the bus system has to be synchronized.</p>
<p>In addition, such devices often use interrupts to trigger the execution of certain functions, such as reading the sensor values. That is, when an interrupt occurs, the driver requires often access to the bus system, for example, to read the status registers.</p>
<p>The access to SPI and I2C interfaces is synchronized by mutual exclusion using mutexes. If one thread tries to access such an interface that is already being used by another thread, it will be blocked until the interface becomes available. Although this synchronization works in the thread context, it does not work in the interrupt context. Accessing such an interface within an ISR would interfere with an already existing interface access. This problem is called <a href="http://api.riot-os.org/group__drivers__netdev__api.html">interrupt context problem</a>.</p>
<p>The only solution to this problem is <em>not to call any function that interacts with a device directly from interrupt context</em>. Rather, the ISR should only indicate the occurrence of the interrupt. The interrupt is then handled asynchronously by a normal function within a thread context.</p>
<p>The problem now is that driver modules usually do not use their own thread, but run in the context of the calling thread. However, it can not be left to the application thread to handle the interrupts of driver modules. The only solution would be to have a separate interrupt handler thread for each driver module that uses interrupts along with SPI or I2C interfaces. However, as the number of such modules increases, many resources (thread contexts, including their thread stacks) are allocated only for interrupt handling.</p>
<h2>Solution</h2>
<p>The solution is to have a single interrupt handler thread which serializes the interrupts of such driver modules and calls the functions of the driver modules to handle the interrupts from its thread context.</p>
<p>For this purpose, each driver module that wants to use this interrupt handler thread has to define an interrupt event of type <a class="el" href="structirq__event__t.html" title="Interrupt event structure. ">irq_event_t</a> for each of its interrupt sources. The interrupt event contains a reference to the function to be called to handle the interrupt.</p>
<p>When an interrupt of the corresponding source occurs, the ISR of the driver module registers only the interrupt event associated with the interrupt source with the <a class="el" href="group__sys__irq__handler.html#ga2bfd61f486060762daa78ff7554cdf80" title="Add an interrupt event to the pending interrupt queue. ">irq_event_add</a> function on the handler. The handler places the interrupt event in an pending interrupt queue.</p>
<p>Each interrupt event can be registered on the handler only once. That is, if the same interrupt occurs multiple times, only its first occurrence is placed to the pending interrupt queue and is handled.</p>
<p>When the interrupt handler thread gets the CPU, it processes all pending interrupt events in the order of their occurrence before it yields.</p>
<h2>Usage</h2>
<p>The single-interrupt handler thread can be used not only for driver modules with bus access, but for any interrupt handling that may trigger a blocking function and therefore cannot be called in an interrupt context.</p>
<dl class="section note"><dt>Note</dt><dd>All interrupts handled by the single interrupt handler thread are serialized.</dd></dl>
<p>To use the interrupt handler thread, using modules have to define a static interrupt event of type <a class="el" href="structirq__event__t.html" title="Interrupt event structure. ">irq_event_t</a> for each of their interrupt sources. These static interrupt events have to be initialized with the static initializer <a class="el" href="group__sys__irq__handler.html#gacaccf343e311d824395ba6f0dfc79cc5" title="Static initializer for irq_event_t. ">IRQ_EVENT_INIT</a>. Furthermore, the interrupt handling function and optionally an argument, the context, have to be set.</p>
<p>Once the interrupt events have been initialized, they can be added to the pending interrupts queue of the interrupt handler thread by an ISR using the <a class="el" href="group__sys__irq__handler.html#ga2bfd61f486060762daa78ff7554cdf80" title="Add an interrupt event to the pending interrupt queue. ">irq_event_add</a> function which indicates that an interrupt has occurred and needs to be handled.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;foo_device.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="irq__handler_8h.html">irq_handler.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// interrupt event structure with static initializer</span></div><div class="line"><span class="keyword">static</span> <a class="code" href="structirq__event__t.html">irq_event_t</a> _int_event = <a class="code" href="group__sys__irq__handler.html#gacaccf343e311d824395ba6f0dfc79cc5">IRQ_EVENT_INIT</a>;</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line"><span class="comment">// non blocking ISR just adds the event and returns</span></div><div class="line">static <span class="keywordtype">void</span> _int_request(<span class="keywordtype">void</span> *arg)</div><div class="line">{</div><div class="line">    <a class="code" href="group__sys__irq__handler.html#ga2bfd61f486060762daa78ff7554cdf80">irq_event_add</a>(&amp;_int_event);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// example handler for the interrupt including blocking functions</span></div><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> _int_handler(<span class="keywordtype">void</span> *ctx)</div><div class="line">{</div><div class="line">    foo_device_t dev = (foo_device_t*)ctx;</div><div class="line">    uint8_t status;</div><div class="line"></div><div class="line">    <span class="comment">// blocking access to the I2C</span></div><div class="line">    i2c_aquire(dev-&gt;i2c_device);</div><div class="line">    <a class="code" href="group__drivers__periph__i2c.html#gac4ab6e73e05b22c2da0c2f178da06d7b">i2c_read_reg</a>(dev-&gt;i2c_device, FOO_DEVICE_REG_STATUS, &amp;status, 1);</div><div class="line">    <a class="code" href="group__drivers__periph__i2c.html#ga824e1b86105462b0df022bcf3ea0634b">i2c_release</a>(dev-&gt;i2c_device);</div><div class="line"></div><div class="line">    <span class="comment">// application thread callbacks</span></div><div class="line">    <span class="keywordflow">switch</span> (status) {</div><div class="line">        <span class="keywordflow">case</span> FOO_INT_TYPE1:  dev-&gt;int_type1.isr(dev-&gt;int_type1.arg);</div><div class="line">                             <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> FOO_INT_TYPE2:  dev-&gt;int_type2.isr(dev-&gt;int_type2.arg);</div><div class="line">                             <span class="keywordflow">break</span>;</div><div class="line">        ...</div><div class="line">    }</div><div class="line">    ...</div><div class="line">}</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">int foo_device_init(foo_device_t *dev, foo_device_params_t *params)</div><div class="line">{</div><div class="line">    <span class="comment">// set the handler for the interrupt</span></div><div class="line">    _int_event.<a class="code" href="structirq__event__t.html#a6f61fdecb7b81878da653fb0e31faaec">isr</a> = _int_handler;</div><div class="line">    _int_event.<a class="code" href="structirq__event__t.html#a33739659fe81ac8a1ea11ed5c8138414">ctx</a> = (<span class="keywordtype">void</span>*)dev;</div><div class="line"></div><div class="line">    <span class="comment">// initialize the GPIO with ISR</span></div><div class="line">    <a class="code" href="group__drivers__periph__gpio.html#ga48ba4c318486db320a4bf6237b49d61c">gpio_init_int</a>(<a class="code" href="atmega1284p_2include_2periph__cpu_8h.html#ae29846b3ecd19a0b7c44ff80a37ae7c1">GPIO_PIN</a>(0, 1), <a class="code" href="group__drivers__periph__gpio.html#gga491a2cbfb4e94f2afcc0d5bdef2dc454a3343e227f62c4c536efff81438a8e155">GPIO_IN</a>, <a class="code" href="group__drivers__periph__gpio.html#gga0e8c3f46deb150e48acaa79fe26b2e86a6c64bb6c299ea83e50f4a3e7513eaadf">GPIO_BOTH</a>, int_request, 0);</div><div class="line">    ...</div><div class="line">}</div></div><!-- fragment --> <table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:irq__handler_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="irq__handler_8h.html">irq_handler.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structirq__event__t.html">irq_event_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt event structure.  <a href="structirq__event__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga9213934b319d3f9ad22b0f63a756cf10"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__irq__handler.html#ga9213934b319d3f9ad22b0f63a756cf10">IRQ_HANDLER_PRIO</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ga9213934b319d3f9ad22b0f63a756cf10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default priority of the interrupt handler thread.  <a href="#ga9213934b319d3f9ad22b0f63a756cf10">More...</a><br /></td></tr>
<tr class="separator:ga9213934b319d3f9ad22b0f63a756cf10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacaccf343e311d824395ba6f0dfc79cc5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__irq__handler.html#gacaccf343e311d824395ba6f0dfc79cc5">IRQ_EVENT_INIT</a></td></tr>
<tr class="memdesc:gacaccf343e311d824395ba6f0dfc79cc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static initializer for <a class="el" href="structirq__event__t.html" title="Interrupt event structure. ">irq_event_t</a>.  <a href="#gacaccf343e311d824395ba6f0dfc79cc5">More...</a><br /></td></tr>
<tr class="separator:gacaccf343e311d824395ba6f0dfc79cc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab7dd61f51b4095d61856a88ce0c29eba"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__irq__handler.html#gab7dd61f51b4095d61856a88ce0c29eba">irq_isr_t</a>) (void *ctx)</td></tr>
<tr class="memdesc:gab7dd61f51b4095d61856a88ce0c29eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt handling function prototype.  <a href="#gab7dd61f51b4095d61856a88ce0c29eba">More...</a><br /></td></tr>
<tr class="separator:gab7dd61f51b4095d61856a88ce0c29eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabaf76ae8b3357f28641e8f125c5199ff"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__irq__handler.html#gabaf76ae8b3357f28641e8f125c5199ff">irq_event_init</a> (<a class="el" href="structirq__event__t.html">irq_event_t</a> *irq)</td></tr>
<tr class="memdesc:gabaf76ae8b3357f28641e8f125c5199ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an interrupt event.  <a href="#gabaf76ae8b3357f28641e8f125c5199ff">More...</a><br /></td></tr>
<tr class="separator:gabaf76ae8b3357f28641e8f125c5199ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bfd61f486060762daa78ff7554cdf80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__irq__handler.html#ga2bfd61f486060762daa78ff7554cdf80">irq_event_add</a> (<a class="el" href="structirq__event__t.html">irq_event_t</a> *irq)</td></tr>
<tr class="memdesc:ga2bfd61f486060762daa78ff7554cdf80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an interrupt event to the pending interrupt queue.  <a href="#ga2bfd61f486060762daa78ff7554cdf80">More...</a><br /></td></tr>
<tr class="separator:ga2bfd61f486060762daa78ff7554cdf80"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gacaccf343e311d824395ba6f0dfc79cc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacaccf343e311d824395ba6f0dfc79cc5">&#9670;&nbsp;</a></span>IRQ_EVENT_INIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRQ_EVENT_INIT</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div><div class="line">                            .event.handler = NULL, \</div><div class="line">                            .event.list_node.next = NULL, \</div><div class="line">                            .pending = <span class="keyword">false</span>, \</div><div class="line">                            .isr = NULL, \</div><div class="line">                            .ctx = NULL, \</div><div class="line">                       }</div></div><!-- fragment -->
<p>Static initializer for <a class="el" href="structirq__event__t.html" title="Interrupt event structure. ">irq_event_t</a>. </p>

<p class="definition">Definition at line <a class="el" href="irq__handler_8h_source.html#l00204">204</a> of file <a class="el" href="irq__handler_8h_source.html">irq_handler.h</a>.</p>

</div>
</div>
<a id="ga9213934b319d3f9ad22b0f63a756cf10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9213934b319d3f9ad22b0f63a756cf10">&#9670;&nbsp;</a></span>IRQ_HANDLER_PRIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IRQ_HANDLER_PRIO&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default priority of the interrupt handler thread. </p>
<p>The priority of the interrupt handler thread has to be high enough that all pending interrupts are handled before other threads are executed. </p>

<p class="definition">Definition at line <a class="el" href="irq__handler_8h_source.html#l00171">171</a> of file <a class="el" href="irq__handler_8h_source.html">irq_handler.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gab7dd61f51b4095d61856a88ce0c29eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab7dd61f51b4095d61856a88ce0c29eba">&#9670;&nbsp;</a></span>irq_isr_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* irq_isr_t) (void *ctx)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt handling function prototype. </p>
<p>Defines the prototype of the function that is registered together with an interrupt event and to be called when the interrupt is handled. </p>

<p class="definition">Definition at line <a class="el" href="irq__handler_8h_source.html#l00180">180</a> of file <a class="el" href="irq__handler_8h_source.html">irq_handler.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga2bfd61f486060762daa78ff7554cdf80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2bfd61f486060762daa78ff7554cdf80">&#9670;&nbsp;</a></span>irq_event_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int irq_event_add </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structirq__event__t.html">irq_event_t</a> *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an interrupt event to the pending interrupt queue. </p>
<p>The interrupt event given by parameter <code>irq</code> will be placed at the end of the pending interrupt queue.</p>
<p>Each interrupt event can be added only once to the pending interrupt queue. That is, if the same interrupt occurs multiple times, only its first occurrence is placed to the pending interrupt queue and is handled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">irq</td><td>Preallocated interrupt event</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-EALREADY</td><td>if the given interrupt event is already pending </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gabaf76ae8b3357f28641e8f125c5199ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabaf76ae8b3357f28641e8f125c5199ff">&#9670;&nbsp;</a></span>irq_event_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void irq_event_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structirq__event__t.html">irq_event_t</a> *&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize an interrupt event. </p>
<p>Initializes the given interrupt event structure.</p>
<p>Only use this function for dynamically allocated interrupt event structures. For the initialization of static interrupt event structures use <a class="el" href="group__sys__irq__handler.html#gacaccf343e311d824395ba6f0dfc79cc5" title="Static initializer for irq_event_t. ">IRQ_EVENT_INIT</a> instead.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">irq</td><td>Pre-allocated <a class="el" href="structirq__event__t.html" title="Interrupt event structure. ">irq_event_t</a> structure, must not be NULL </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="irq__handler_8h_source.html#l00224">224</a> of file <a class="el" href="irq__handler_8h_source.html">irq_handler.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Thu Jul 2 2020 17:48:24 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
