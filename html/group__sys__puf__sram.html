<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon.png">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>SRAM PUF</title>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery.min.js"></script>
    <script src="jquery.powertip.min.js"></script>
    <script src="jquery-ui.min.js"></script>
    <script src="doxy-jquery.js"></script>
    <script src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <!-- Bootstrap -->
    <link href="doxygen.css" rel="stylesheet">
    <link href="fonts.css" rel="stylesheet">
    <link href="bootstrap.min.css" rel="stylesheet">
    <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
    <link href="riot.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
        <script>
            function displaySR(){
            searchBox.Search();
            var rhtml=(document.getElementById('MSearchResults').contentWindow.document.body.innerHTML).replace(/href=\"\.\.\//g,'href="');
            document.getElementById('MSearchResultsWindow').style.display='none';
            document.getElementById('top').append(document.getElementById('MSearchSelectWindow'));
            document.getElementById('top').append(document.getElementById('MSearchResultsWindow'));
            document.getElementById('doc-content').innerHTML=rhtml;
            }
            function modSearch(){
            if(!searchBox.doxySearch){
                searchBox.doxySearch=searchBox.Search
                searchBox.Search= function(){this.doxySearch();
                var r=document.getElementById('MSearchResultsWindow');console.log(r.style);
                if(parseInt(r.style.left)<0)r.style.left=0;
                var x=document.getElementById('MSearchResults');
                if(x.scrollWidth>window.screen.width)x.style.width=window.screen.width-2+'px';
                var f=document.getElementById('riot-searchform');
                if(parseInt( r.style.top) < f.offsetTop+f.scrollHeight) r.style.top = f.offsetTop+f.scrollHeight+'px';}
            }
            }
        </script>
  </head>
  <body>
      <div id="top">
        <nav class="navbar navbar-inverse">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" id="brand-logo" href="http://riot-os.org"><img height="40px" src="riot-logo.svg" /></a>
              <p class="navbar-text text-center visible-xs">Documentation</p>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="navbar-collapse">
              <p class="navbar-text navbar-left"><span id="projectbrief">The friendly Operating System for the Internet of Things</span></p>
              <ul id="riot-navlist" class="nav navbar-nav"></ul>
              <form id="riot-searchform" class="navbar-form navbar-left navbar-right"
                    onsubmit="try{
                        displaySR();
                    }finally{
                            return false;
                    }">
                 <div class="form-group">
                   <div id="MSearchBox" class="MSearchBoxActive">
                     <div class="input-group">
                       <div class="input-group-addon">
                         <span id="MSearchSelect" class="glyphicon glyphicon-search" aria-hidden="true" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"></span>
                       </div>
                       <input class="form-control" type="text" id="MSearchField" placeholder="Search" accesskey="S" onfocus="searchBox.OnSearchFieldFocus(true)" onblur="searchBox.OnSearchFieldFocus(false)" onkeyup="searchBox.OnSearchFieldChange(event); modSearch();">
                       <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()">
                         <span id="search-reset" class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                       </a>
                     </div>
                   </div>
                 </div>
              </form>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
      </div>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sys__puf__sram.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SRAM PUF<div class="ingroups"><a class="el" href="group__sys.html">System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>SRAM based physically unclonable function (PUF)  
<a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>SRAM based physically unclonable function (PUF) </p>
<dl class="section warning"><dt>Warning</dt><dd><b class="text-danger">This feature is experimental!</b> This API is experimental and in an early state - expect changes! </dd>
<dd>
The SRAM based seed mechanism it not cryptographically secure in its current state.</dd></dl>
<h1>About</h1>
<p>Transistor variations of SRAM memory cells lead to different states after device power-on. The startup state of multiple memory blocks form a device-unique pattern plus additional noise ("weak PUF"). The noise is used to generate random numbers for PRNG seeding.</p>
<h1>Preliminaries</h1>
<p>High entropy numbers can only be generated when the device starts from power-off (including low-power modes that turn of the RAM partly) and before the memory has been used. That's why the SRAM PUF procedure is implemented even before kernel initialization. Memory properties are hardware specific and can depend on environmental conditions. Thus, they should be evaluated for each individual deployment. A basic testing tool is provided in /RIOT/tests/puf_sram.</p>
<h1>Soft-reset detection</h1>
<p>In order to detect a software reboot without preceding power-off phase, a soft-reset detection mechanism writes a marker memory <code>PUF_SRAM_MARKER</code> into SRAM. If the marker is still present after a restart, a soft-reset is expected and the PUF procedure is skipped.</p>
<h1>Random Seed Generation</h1>
<p>Uninitialized memory pattern are compressed by the lightweight DEK hash function to generate a high entropy 32-bit integer which can be used to seed a PRNG. This hash function is not cryptographically secure and as such, adversaries might be able to track parts of the initial SRAM response by analyzing PRNG sequences. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:puf__sram_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="puf__sram_8h.html">puf_sram.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gafb5e933abd06c58d08f3ea0b87c57598"><td class="memItemLeft" align="right" valign="top"><a id="gafb5e933abd06c58d08f3ea0b87c57598"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#gafb5e933abd06c58d08f3ea0b87c57598">SEED_RAM_LEN</a>&#160;&#160;&#160;(2048 / sizeof(uint32_t))</td></tr>
<tr class="memdesc:gafb5e933abd06c58d08f3ea0b87c57598"><td class="mdescLeft">&#160;</td><td class="mdescRight">SRAM length considered for seeding. <br /></td></tr>
<tr class="separator:gafb5e933abd06c58d08f3ea0b87c57598"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4abc08dea00c9816d023b6859286b6f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#gab4abc08dea00c9816d023b6859286b6f">PUF_SRAM_MARKER</a>&#160;&#160;&#160;(0xad3021ff)</td></tr>
<tr class="memdesc:gab4abc08dea00c9816d023b6859286b6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">SRAM marker to detect reboot without power-off.  <a href="#gab4abc08dea00c9816d023b6859286b6f">More...</a><br /></td></tr>
<tr class="separator:gab4abc08dea00c9816d023b6859286b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6b27ce5b23b67f52806c9197ef397306"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#ga6b27ce5b23b67f52806c9197ef397306">puf_sram_init</a> (const uint8_t *ram, <a class="el" href="msp430__types_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a> len)</td></tr>
<tr class="memdesc:ga6b27ce5b23b67f52806c9197ef397306"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks source of reboot by <code>puf_sram_softreset</code> and conditionally calls <code>puf_sram_generate</code>  <a href="#ga6b27ce5b23b67f52806c9197ef397306">More...</a><br /></td></tr>
<tr class="separator:ga6b27ce5b23b67f52806c9197ef397306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#ga760b51e9e3830d2f79ab2db24f8bb7f2">puf_sram_generate</a> (const uint8_t *ram, <a class="el" href="msp430__types_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a> len)</td></tr>
<tr class="memdesc:ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">builds hash from <code>SEED_RAM_LEN</code> bytes uninitialized SRAM, writes it to the global variable <code>puf_sram_seed</code> and returns the value  <a href="#ga760b51e9e3830d2f79ab2db24f8bb7f2">More...</a><br /></td></tr>
<tr class="separator:ga760b51e9e3830d2f79ab2db24f8bb7f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#ga8184b5edf6d211e2124d8d1e2e0aafde">puf_sram_softreset</a> (void)</td></tr>
<tr class="memdesc:ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="mdescLeft">&#160;</td><td class="mdescRight">checks for a memory marker to determine whether memory contains old data.  <a href="#ga8184b5edf6d211e2124d8d1e2e0aafde">More...</a><br /></td></tr>
<tr class="separator:ga8184b5edf6d211e2124d8d1e2e0aafde"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac97f85cddd384419f703e5052478d03e"><td class="memItemLeft" align="right" valign="top"><a id="gac97f85cddd384419f703e5052478d03e"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#gac97f85cddd384419f703e5052478d03e">puf_sram_seed</a></td></tr>
<tr class="memdesc:gac97f85cddd384419f703e5052478d03e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global seed variable, allocated in puf_sram.c. <br /></td></tr>
<tr class="separator:gac97f85cddd384419f703e5052478d03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga350061341d80d427e23a26f5e713a389"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#ga350061341d80d427e23a26f5e713a389">puf_sram_state</a></td></tr>
<tr class="memdesc:ga350061341d80d427e23a26f5e713a389"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global seed state, allocated in puf_sram.c 0 means seed was generated from SRAM pattern, 1 means missing power cycle detected, 2 means power cycle detected.  <a href="#ga350061341d80d427e23a26f5e713a389">More...</a><br /></td></tr>
<tr class="separator:ga350061341d80d427e23a26f5e713a389"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81e7f9693ddd02cb8a5158dbae62a654"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sys__puf__sram.html#ga81e7f9693ddd02cb8a5158dbae62a654">puf_sram_softreset_cnt</a></td></tr>
<tr class="memdesc:ga81e7f9693ddd02cb8a5158dbae62a654"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter variable allocated in puf_sram.c.  <a href="#ga81e7f9693ddd02cb8a5158dbae62a654">More...</a><br /></td></tr>
<tr class="separator:ga81e7f9693ddd02cb8a5158dbae62a654"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab4abc08dea00c9816d023b6859286b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4abc08dea00c9816d023b6859286b6f">&#9670;&nbsp;</a></span>PUF_SRAM_MARKER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PUF_SRAM_MARKER&#160;&#160;&#160;(0xad3021ff)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SRAM marker to detect reboot without power-off. </p>
<p>Source: <a href="https://www.random.org/bytes/">https://www.random.org/bytes/</a> </p>

<p class="definition">Definition at line <a class="el" href="puf__sram_8h_source.html#l00076">76</a> of file <a class="el" href="puf__sram_8h_source.html">puf_sram.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga760b51e9e3830d2f79ab2db24f8bb7f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga760b51e9e3830d2f79ab2db24f8bb7f2">&#9670;&nbsp;</a></span>puf_sram_generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void puf_sram_generate </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msp430__types_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>builds hash from <code>SEED_RAM_LEN</code> bytes uninitialized SRAM, writes it to the global variable <code>puf_sram_seed</code> and returns the value </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ram</td><td>pointer to SRAM memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of the memory to consider </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga6b27ce5b23b67f52806c9197ef397306"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6b27ce5b23b67f52806c9197ef397306">&#9670;&nbsp;</a></span>puf_sram_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void puf_sram_init </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ram</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msp430__types_8h.html#a7c94ea6f8948649f8d181ae55911eeaf">size_t</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks source of reboot by <code>puf_sram_softreset</code> and conditionally calls <code>puf_sram_generate</code> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ram</td><td>pointer to SRAM memory </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of the memory to consider </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga8184b5edf6d211e2124d8d1e2e0aafde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8184b5edf6d211e2124d8d1e2e0aafde">&#9670;&nbsp;</a></span>puf_sram_softreset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool puf_sram_softreset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>checks for a memory marker to determine whether memory contains old data. </p>
<p>Otherwise it assumes a reboot from power down mode</p>
<dl class="section return"><dt>Returns</dt><dd>0 when reset with power cycle was detected </dd>
<dd>
1 when reset without power cycle was detected </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga81e7f9693ddd02cb8a5158dbae62a654"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81e7f9693ddd02cb8a5158dbae62a654">&#9670;&nbsp;</a></span>puf_sram_softreset_cnt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t puf_sram_softreset_cnt</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counter variable allocated in puf_sram.c. </p>
<p>It is incremented during each soft reset when no new PUF measurement was taken and it gets reset to zero after a power cycle was detected. </p>

</div>
</div>
<a id="ga350061341d80d427e23a26f5e713a389"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga350061341d80d427e23a26f5e713a389">&#9670;&nbsp;</a></span>puf_sram_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t puf_sram_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Global seed state, allocated in puf_sram.c 0 means seed was generated from SRAM pattern, 1 means missing power cycle detected, 2 means power cycle detected. </p>
<p>The state will most likely be overwritten with 0 in the next steps </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
    <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
        <ul>
            <li class="footer">Generated on Fri Jul 3 2020 23:49:40 by <a href="http://www.doxygen.org/index.html">
                       <img class="footer" src="doxygen.png" alt="doxygen"></a> 1.8.13</li>
        </ul>
    </div>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap.min.js"></script>
    <script src="jquery.smartmenus.min.js"></script>
    <script src="jquery.smartmenus.bootstrap.min.js"></script>
    <script src="riot-doxy.js"></script>
  </body>
</html>
